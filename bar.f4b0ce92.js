import{T as q}from"./index.75b94a68.js";import{g as z,d as H}from"./daili.9b11ba9c.js";import{d as c,L as w,k as v,_ as C,r as n,o as d,z as p,w as o,b as u,c as B,F as L,y as T,e as b,t as E,H as $,a as A,N as P,j as U,G as j,I as R,E as I}from"./index.2d078062.js";import{g as k,e as N,a as M,b as O}from"./table.b6bd7b42.js";import{r as G,s as J}from"./enum.8cbae253.js";import{P as K,S as Q,D as W}from"./Search.b2bfb72f.js";const X=c({data(){return{myData:[],myDatav:[]}},components:{Layer:w},props:{layer:{type:Object,default:()=>({show:!1,title:"",showButton:!0})}},created(){this.getProductv()},setup(e,a){const F=v(null),m=v(null);let f=v({Userid:"",RoadUid:"",RoadName:"",RoadRemark:"",ProductName:"",PayType:"",BasicRate:"",SettleFee:"",RoadTotalLimit:"",RoadEverydayLimit:"",SingleMinLimit:"",SingleMaxLimit:"",StartHour:"0",EndHour:"23",Params:""});const y={roadUid:[{required:!0,message:"\u8BF7\u8F93\u5165\u59D3\u540D",trigger:"blur"}]};t();function t(){e.layer.row&&(f.value=JSON.parse(JSON.stringify(e.layer.row)))}return{form:f,rules:y,layerDom:m,ruleForm:F,radioData:G,selectData:J}},methods:{submit(){this.ruleForm&&this.ruleForm.validate(e=>{if(e){let a=this.form;this.layer.row?this.updateForm(a):this.addForm(a)}else return!1})},getProductv(){k().then(e=>{this.myData=e.ProductMap})},getProductone(e){N(e).then(a=>{this.myDatav=a.RoadInfoList})},addForm(e){M(e).then(a=>{this.$message({type:"success",message:"\u65B0\u589E\u6210\u529F"}),this.$emit("getTableData",!0),this.layerDom&&this.layerDom.close()})},updateForm(e){O(e).then(a=>{this.$message({type:"success",message:"\u7F16\u8F91\u6210\u529F"}),this.$emit("getTableData",!1),this.layerDom&&this.layerDom.close()})}}});function Y(e,a,F,m,f,y){const t=n("el-input"),r=n("el-form-item"),g=n("el-option"),i=n("el-select"),V=n("el-radio"),h=n("el-radio-group"),s=n("el-form"),D=n("Layer",!0);return d(),p(D,{layer:e.layer,onConfirm:e.submit,ref:"layerDom"},{default:o(()=>[u(s,{model:e.form,rules:e.rules,ref:"ruleForm","label-width":"120px",style:{"margin-right":"30px"}},{default:o(()=>[u(r,{label:"\u901A\u9053\u540D\u79F0\uFF1A",prop:"RoadName"},{default:o(()=>[u(t,{modelValue:e.form.RoadName,"onUpdate:modelValue":a[0]||(a[0]=l=>e.form.RoadName=l),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0"},null,8,["modelValue"])]),_:1}),u(r,{label:"\u5907\u6CE8\uFF1A",prop:"RoadRemark"},{default:o(()=>[u(t,{modelValue:e.form.RoadRemark,"onUpdate:modelValue":a[1]||(a[1]=l=>e.form.RoadRemark=l),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0"},null,8,["modelValue"])]),_:1}),u(r,{label:"\u6570\u5B57\uFF1A",prop:"Userid"},{default:o(()=>[u(t,{modelValue:e.form.Userid,"onUpdate:modelValue":a[2]||(a[2]=l=>e.form.Userid=l),oninput:"value=value.replace(/[^\\d]/g,'')",placeholder:"\u53EA\u80FD\u8F93\u5165\u6B63\u6574\u6570"},null,8,["modelValue"])]),_:1}),u(r,{style:{"margin-left":"2px"}},{default:o(()=>[u(r,{label:"\u4EA7\u54C1\u540D\u79F0\uFF1A",prop:"select",style:{"margin-left":"2px"}},{default:o(()=>[u(i,{modelValue:e.form.ProductName,"onUpdate:modelValue":a[3]||(a[3]=l=>e.form.ProductName=l),placeholder:"\u8BF7\u9009\u62E9"},{default:o(()=>[(d(!0),B(L,null,T(e.myData,(l,S)=>(d(),p(g,{key:l,label:l,value:S},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),u(r,{label:"\u652F\u4ED8\u7C7B\u578B\uFF1A",prop:"select",style:{"margin-left":"2px"}},{default:o(()=>[u(i,{modelValue:e.form.PayType,"onUpdate:modelValue":a[4]||(a[4]=l=>e.form.PayType=l),placeholder:"\u8BF7\u9009\u62E9",clearable:""},{default:o(()=>[(d(!0),B(L,null,T(e.selectData,l=>(d(),p(g,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),u(r,{label:"\u901A\u9053\u8D39\u7387\uFF1A",prop:"BasicRate"},{default:o(()=>[u(t,{modelValue:e.form.BasicRate,"onUpdate:modelValue":a[5]||(a[5]=l=>e.form.BasicRate=l),oninput:"value=value.replace(/[^\\d]/g,'')",placeholder:"\u53EA\u80FD\u8F93\u5165\u6B63\u6574\u6570"},null,8,["modelValue"])]),_:1}),u(r,{label:"\u4EE3\u4ED8\u624B\u7EED\u8D39\uFF1A",prop:"SettleFee"},{default:o(()=>[u(t,{modelValue:e.form.SettleFee,"onUpdate:modelValue":a[6]||(a[6]=l=>e.form.SettleFee=l),oninput:"value=value.replace(/[^\\d]/g,'')",placeholder:"\u53EA\u80FD\u8F93\u5165\u6B63\u6574\u6570"},null,8,["modelValue"])]),_:1}),u(r,{label:"\u901A\u9053\u603B\u989D\u5EA6\uFF1A",prop:"RoadTotalLimit"},{default:o(()=>[u(t,{modelValue:e.form.RoadTotalLimit,"onUpdate:modelValue":a[7]||(a[7]=l=>e.form.RoadTotalLimit=l),oninput:"value=value.replace(/[^\\d]/g,'')",placeholder:"\u53EA\u80FD\u8F93\u5165\u6B63\u6574\u6570"},null,8,["modelValue"])]),_:1}),u(r,{label:"\u6BCF\u5929\u989D\u5EA6\uFF1A",prop:"RoadEverydayLimit"},{default:o(()=>[u(t,{modelValue:e.form.RoadEverydayLimit,"onUpdate:modelValue":a[8]||(a[8]=l=>e.form.RoadEverydayLimit=l),oninput:"value=value.replace(/[^\\d]/g,'')",placeholder:"\u53EA\u80FD\u8F93\u5165\u6B63\u6574\u6570"},null,8,["modelValue"])]),_:1}),u(r,{label:"\u5355\u7B14\u91D1\u989D\u6700\u5C0F\uFF1A",prop:"SingleMinLimit"},{default:o(()=>[u(t,{modelValue:e.form.SingleMinLimit,"onUpdate:modelValue":a[9]||(a[9]=l=>e.form.SingleMinLimit=l),oninput:"value=value.replace(/[^\\d]/g,'')",placeholder:"\u53EA\u80FD\u8F93\u5165\u6B63\u6574\u6570"},null,8,["modelValue"])]),_:1}),u(r,{label:"\u5355\u7B14\u91D1\u989D\u6700\u5927\uFF1A",prop:"SingleMaxLimit"},{default:o(()=>[u(t,{modelValue:e.form.SingleMaxLimit,"onUpdate:modelValue":a[10]||(a[10]=l=>e.form.SingleMaxLimit=l),oninput:"value=value.replace(/[^\\d]/g,'')",placeholder:"\u53EA\u80FD\u8F93\u5165\u6B63\u6574\u6570"},null,8,["modelValue"])]),_:1}),u(r,{label:"\u5355\u9009\u6846\uFF1A",prop:"radio"},{default:o(()=>[u(h,{modelValue:e.form.radio,"onUpdate:modelValue":a[11]||(a[11]=l=>e.form.radio=l)},{default:o(()=>[(d(!0),B(L,null,T(e.radioData,l=>(d(),p(V,{key:l.value,label:l.value},{default:o(()=>[b(E(l.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),u(r,{label:"\u53C2\u6570\u914D\u7F6EJSON\uFF1A",prop:"Params"},{default:o(()=>[$(A("textarea",{style:{width:"100%",height:"200px"},"onUpdate:modelValue":a[12]||(a[12]=l=>e.form.Params=l)},null,512),[[P,e.form.Params]])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["layer","onConfirm"])}var Z=C(X,[["render",Y]]);const _=c({data(){return{myData:[],myDatav:[]}},components:{Layer:w},props:{layer:{type:Object,default:()=>({show:!1,title:"",showButton:!0})}},created(){this.getProductv()},setup(e,a){const F=v(null),m=v(null);let f=v({Userid:"",RoadUid:"",RoadName:"",Remark:"",ProductName:"",PayType:"",BasicRate:"",SettleFee:"",TotalLimit:"",TodayLimit:"",SingleMinLimit:"",SingleMaxLimit:"",StartHour:"0",EndHour:"23",Params:""});const y={roadUid:[{required:!0,message:"\u8BF7\u8F93\u5165\u59D3\u540D",trigger:"blur"}]};t();function t(){e.layer.row&&(f.value=JSON.parse(JSON.stringify(e.layer.row)))}return{form:f,rules:y,layerDom:m,ruleForm:F,radioData:G,selectData:J}},methods:{submit(){this.ruleForm&&this.ruleForm.validate(e=>{if(e){let a=this.form;this.layer.row?this.updateForm(a):this.addForm(a)}else return!1})},getProductv(){k().then(e=>{this.myData=e.ProductMap})},getProductone(e){N(e).then(a=>{this.myDatav=a.RoadInfoList})},addForm(e){M(e).then(a=>{this.$message({type:"success",message:"\u65B0\u589E\u6210\u529F"}),this.$emit("getTableData",!0),this.layerDom&&this.layerDom.close()})},updateForm(e){O(e).then(a=>{this.$message({type:"success",message:"\u7F16\u8F91\u6210\u529F"}),this.$emit("getTableData",!1),this.layerDom&&this.layerDom.close()})}}});function x(e,a,F,m,f,y){const t=n("el-input"),r=n("el-form-item"),g=n("el-option"),i=n("el-select"),V=n("el-radio"),h=n("el-radio-group"),s=n("el-form"),D=n("Layer");return d(),p(D,{layer:e.layer,onConfirm:e.submit,ref:"layerDom"},{default:o(()=>[u(s,{model:e.form,rules:e.rules,ref:"ruleForm","label-width":"120px",style:{"margin-right":"30px"}},{default:o(()=>[u(r,{label:"\u901A\u9053\u540D\u79F0\uFF1A",prop:"RoadName"},{default:o(()=>[u(t,{modelValue:e.form.RoadName,"onUpdate:modelValue":a[0]||(a[0]=l=>e.form.RoadName=l),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0"},null,8,["modelValue"])]),_:1}),u(r,{label:"\u5907\u6CE8\uFF1A",prop:"Remark"},{default:o(()=>[u(t,{modelValue:e.form.Remark,"onUpdate:modelValue":a[1]||(a[1]=l=>e.form.Remark=l),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0"},null,8,["modelValue"])]),_:1}),u(r,{label:"\u6570\u5B57\uFF1A",prop:"Userid"},{default:o(()=>[u(t,{modelValue:e.form.Userid,"onUpdate:modelValue":a[2]||(a[2]=l=>e.form.Userid=l),oninput:"value=value.replace(/[^\\d]/g,'')",placeholder:"\u53EA\u80FD\u8F93\u5165\u6B63\u6574\u6570"},null,8,["modelValue"])]),_:1}),u(r,{style:{"margin-left":"2px"}},{default:o(()=>[u(r,{label:"\u4EA7\u54C1\u540D\u79F0\uFF1A",prop:"select",style:{"margin-left":"2px"}},{default:o(()=>[u(i,{modelValue:e.form.ProductName,"onUpdate:modelValue":a[3]||(a[3]=l=>e.form.ProductName=l),placeholder:"\u8BF7\u9009\u62E9"},{default:o(()=>[(d(!0),B(L,null,T(e.myData,(l,S)=>(d(),p(g,{key:l,label:l,value:S},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),u(r,{label:"\u652F\u4ED8\u7C7B\u578B\uFF1A",prop:"select",style:{"margin-left":"2px"}},{default:o(()=>[u(i,{modelValue:e.form.PayType,"onUpdate:modelValue":a[4]||(a[4]=l=>e.form.PayType=l),placeholder:"\u8BF7\u9009\u62E9",clearable:""},{default:o(()=>[(d(!0),B(L,null,T(e.selectData,l=>(d(),p(g,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),u(r,{label:"\u901A\u9053\u8D39\u7387\uFF1A",prop:"BasicFee"},{default:o(()=>[u(t,{modelValue:e.form.BasicFee,"onUpdate:modelValue":a[5]||(a[5]=l=>e.form.BasicFee=l),oninput:"value=value.replace(/[^\\d]/g,'')",placeholder:"\u53EA\u80FD\u8F93\u5165\u6B63\u6574\u6570"},null,8,["modelValue"])]),_:1}),u(r,{label:"\u4EE3\u4ED8\u624B\u7EED\u8D39\uFF1A",prop:"SettleFee"},{default:o(()=>[u(t,{modelValue:e.form.SettleFee,"onUpdate:modelValue":a[6]||(a[6]=l=>e.form.SettleFee=l),oninput:"value=value.replace(/[^\\d]/g,'')",placeholder:"\u53EA\u80FD\u8F93\u5165\u6B63\u6574\u6570"},null,8,["modelValue"])]),_:1}),u(r,{label:"\u901A\u9053\u603B\u989D\u5EA6\uFF1A",prop:"TotalLimit"},{default:o(()=>[u(t,{modelValue:e.form.TotalLimit,"onUpdate:modelValue":a[7]||(a[7]=l=>e.form.TotalLimit=l),oninput:"value=value.replace(/[^\\d]/g,'')",placeholder:"\u53EA\u80FD\u8F93\u5165\u6B63\u6574\u6570"},null,8,["modelValue"])]),_:1}),u(r,{label:"\u6BCF\u5929\u989D\u5EA6\uFF1A",prop:"TodayLimit"},{default:o(()=>[u(t,{modelValue:e.form.TodayLimit,"onUpdate:modelValue":a[8]||(a[8]=l=>e.form.TodayLimit=l),oninput:"value=value.replace(/[^\\d]/g,'')",placeholder:"\u53EA\u80FD\u8F93\u5165\u6B63\u6574\u6570"},null,8,["modelValue"])]),_:1}),u(r,{label:"\u5355\u7B14\u91D1\u989D\u6700\u5C0F\uFF1A",prop:"SingleMinLimit"},{default:o(()=>[u(t,{modelValue:e.form.SingleMinLimit,"onUpdate:modelValue":a[9]||(a[9]=l=>e.form.SingleMinLimit=l),oninput:"value=value.replace(/[^\\d]/g,'')",placeholder:"\u53EA\u80FD\u8F93\u5165\u6B63\u6574\u6570"},null,8,["modelValue"])]),_:1}),u(r,{label:"\u5355\u7B14\u91D1\u989D\u6700\u5927\uFF1A",prop:"SingleMaxLimit"},{default:o(()=>[u(t,{modelValue:e.form.SingleMaxLimit,"onUpdate:modelValue":a[10]||(a[10]=l=>e.form.SingleMaxLimit=l),oninput:"value=value.replace(/[^\\d]/g,'')",placeholder:"\u53EA\u80FD\u8F93\u5165\u6B63\u6574\u6570"},null,8,["modelValue"])]),_:1}),u(r,{label:"\u5355\u9009\u6846\uFF1A",prop:"radio"},{default:o(()=>[u(h,{modelValue:e.form.radio,"onUpdate:modelValue":a[11]||(a[11]=l=>e.form.radio=l)},{default:o(()=>[(d(!0),B(L,null,T(e.radioData,l=>(d(),p(V,{key:l.value,label:l.value},{default:o(()=>[b(E(l.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),u(r,{label:"\u53C2\u6570\u914D\u7F6EJSON\uFF1A",prop:"Params"},{default:o(()=>[$(A("textarea",{style:{width:"100%",height:"200px"},"onUpdate:modelValue":a[12]||(a[12]=l=>e.form.Params=l)},null,512),[[P,e.form.Params]])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["layer","onConfirm"])}var ee=C(_,[["render",x]]);const le=c({name:"crudTable",components:{Table:q,Layer:Z,Layeredit:ee},setup(){const e=U({input:""}),a=U({show:!1,title:"\u65B0\u589E",showButton:!0}),F=U({show:!1,title:"\u6539\u5BC6",showButton:!0}),m=U({index:1,size:20,total:0}),f=v(!0),y=v([]),t=v([]),r=s=>{t.value=s},g=s=>{f.value=!0,s&&(m.index=1);let D={page:m.index,pageSize:m.size,...e};z(D).then(l=>{l.AgentList,y.value=l.AgentList,m.total=Number(l.TotalPage)*m.size}).catch(l=>{y.value=[],m.index=1,m.total=0}).finally(()=>{f.value=!1})},i=s=>{let D={merchantUid:s.map(l=>l.AgentUid).join(",")};H(D).then(l=>{I({type:"success",message:"\u5220\u9664\u6210\u529F"}),g(y.value.length===1)})},V=()=>{a.title="\u65B0\u589E\u6570\u636E",a.show=!0,delete a.row},h=s=>{F.title="\u91CD\u7F6E\u5BC6\u7801",F.row=s,F.show=!0};return g(!0),{Plus:K,Search:Q,Delete:W,query:e,tableData:y,chooseData:t,loading:f,layeredit:F,page:m,layer:a,handleSelectionChange:r,handleAdd:V,handleEdit:h,handleDel:i,getTableData:g}}}),ae={class:"layout-container"},ue={class:"layout-container-form flex space-between"},oe={class:"layout-container-form-handle"},te={class:"layout-container-form-search"},re={class:"layout-container-table"};function ne(e,a,F,m,f,y){const t=n("el-button"),r=n("el-popconfirm"),g=n("el-input"),i=n("el-table-column"),V=n("Table"),h=n("Layer"),s=n("Layeredit"),D=j("loading");return d(),B("div",ae,[A("div",ue,[A("div",oe,[u(t,{type:"primary",icon:e.Plus,onClick:e.handleAdd},{default:o(()=>[b(E(e.$t("message.common.add")),1)]),_:1},8,["icon","onClick"]),u(r,{title:e.$t("message.common.delTip"),onConfirm:a[0]||(a[0]=l=>e.handleDel(e.chooseData))},{reference:o(()=>[u(t,{type:"danger",icon:e.Delete,disabled:e.chooseData.length===0},{default:o(()=>[b(E(e.$t("message.common.delBat")),1)]),_:1},8,["icon","disabled"])]),_:1},8,["title"])]),A("div",te,[u(g,{modelValue:e.query.input,"onUpdate:modelValue":a[1]||(a[1]=l=>e.query.input=l),placeholder:e.$t("message.common.searchTip"),onChange:a[2]||(a[2]=l=>e.getTableData(!0))},null,8,["modelValue","placeholder"]),u(t,{type:"primary",icon:e.Search,class:"search-btn",onClick:a[3]||(a[3]=l=>e.getTableData(!0))},{default:o(()=>[b(E(e.$t("message.common.search")),1)]),_:1},8,["icon"])])]),A("div",re,[$((d(),p(V,{ref:"table",page:e.page,"onUpdate:page":a[4]||(a[4]=l=>e.page=l),showIndex:!0,showSelection:!0,data:e.tableData,onGetTableData:e.getTableData,onSelectionChange:e.handleSelectionChange},{default:o(()=>[u(i,{prop:"Status",label:"\u72B6\u6001",align:"center"},{default:o(l=>[l.row.Status=="active"?(d(),p(t,{key:0},{default:o(()=>[b(" \u6FC0\u6D3B\u72B6\u6001 ")]),_:1})):(d(),p(t,{key:1,type:"primary"},{default:o(()=>[b(" \u51BB\u7ED3\u72B6\u6001 ")]),_:1}))]),_:1}),u(i,{prop:"AgentUid",label:"\u4EE3\u7406\u7F16\u53F7",align:"center"}),u(i,{prop:"AgentName",label:"\u4EE3\u7406\u540D\u79F0",align:"center"}),u(i,{prop:"AgentPhone",label:"\u767B\u5F55\u8D26\u53F7",align:"center"}),u(i,{label:e.$t("message.common.handle"),align:"center",fixed:"right",width:"300"},{default:o(l=>[u(t,{type:"warning",onClick:S=>e.handleEdit(l.row)},{default:o(()=>[b("\u91CD\u7F6E\u5BC6\u7801")]),_:2},1032,["onClick"]),u(r,{title:e.$t("message.common.delTip"),onConfirm:S=>e.handleDel([l.row])},{reference:o(()=>[u(t,{type:"danger"},{default:o(()=>[b(E(e.$t("message.common.del")),1)]),_:1})]),_:2},1032,["title","onConfirm"])]),_:1},8,["label"])]),_:1},8,["page","data","onGetTableData","onSelectionChange"])),[[D,e.loading]]),e.layer.show?(d(),p(h,{key:0,layer:e.layer,onGetTableData:e.getTableData},null,8,["layer","onGetTableData"])):R("",!0),e.layeredit.show?(d(),p(s,{key:1,layer:e.layeredit,onGetTableData:e.getTableData},null,8,["layer","onGetTableData"])):R("",!0)])])}var Fe=C(le,[["render",ne]]);export{Fe as default};
