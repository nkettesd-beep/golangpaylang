import{a as z,b as j,u as O}from"./user.e7725fd5.js";import{T as M}from"./index.75b94a68.js";import{d as _,L as S,j as w,_ as A,r as o,o as g,z as y,w as t,b as l,c as E,F as R,y as L,H as N,a as D,N as P,t as B,e as v,k as $,G as J,I as k,E as T}from"./index.2d078062.js";import{p as H,q as I,r as q,s as Y,t as K,v as Q}from"./table.b6bd7b42.js";import{P as W,D as X,S as Z}from"./Search.b2bfb72f.js";const x=_({data(){return{myData:[{value:"active",label:"\u6FC0\u6D3B"},{value:"unactive",label:"\u51BB\u7ED3"}]}},components:{Layer:S},props:{layer:{type:Object,default:()=>({show:!1,title:"",showButton:!0})}},created(){this.uapi()},setup(e,a){return{ruleForm:w({operatorAccount:"",operatorPassword:"",operatorRole:"",status:"",remark:""}),rules:{operatorAccount:[{required:!0,message:"\u8BF7\u8F93\u5165\u59D3\u540D",trigger:"blur"}],sort:[{required:!0,message:"\u8BF7\u8F93\u5165\u6570\u5B57",trigger:"blur"}],select:[{required:!0,message:"\u8BF7\u9009\u62E9",trigger:"blur"}],radio:[{required:!0,message:"\u8BF7\u9009\u62E9",trigger:"blur"}]},options:[{value:"active",label:"\u6FC0\u6D3B"},{value:"unactive",label:"\u51BB\u7ED3"}]}},methods:{submit(){this.$refs.form.validate(e=>{if(e){let a=this.ruleForm;this.layer.row?this.updateForm(a):this.addForm(a)}else return!1})},uapi(){H().then(e=>{this.myData=e.RoleInfoList})},addForm(e){I(e).then(a=>{this.$message({type:"success",message:"\u65B0\u589E\u6210\u529F"}),this.layer.show=!1,this.$emit("getTableData",!0)})},updateForm(e){q(e).then(a=>{this.$message({type:"success",message:"\u7F16\u8F91\u6210\u529F"}),this.$emit("getTableData",!1)})}}});function ee(e,a,p,c,m,F){const r=o("el-input"),n=o("el-form-item"),h=o("el-option"),i=o("el-select"),b=o("el-form"),C=o("Layer",!0);return g(),y(C,{layer:e.layer,onConfirm:e.submit},{default:t(()=>[l(b,{model:e.ruleForm,rules:e.rules,ref:"form","label-width":"120px",style:{"margin-right":"30px"}},{default:t(()=>[l(n,{label:"\u767B\u5F55\u8D26\u53F7\uFF1A",prop:"operatorAccount"},{default:t(()=>[l(r,{modelValue:e.ruleForm.operatorAccount,"onUpdate:modelValue":a[0]||(a[0]=u=>e.ruleForm.operatorAccount=u),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0"},null,8,["modelValue"])]),_:1}),l(n,{label:"\u521D\u59CB\u5BC6\u7801\uFF1A",prop:"operatorPassword"},{default:t(()=>[l(r,{modelValue:e.ruleForm.operatorPassword,"onUpdate:modelValue":a[1]||(a[1]=u=>e.ruleForm.operatorPassword=u),placeholder:"\u53EA\u80FD\u8F93\u5165\u6B63\u6574\u6570"},null,8,["modelValue"])]),_:1}),l(n,{label:"\u89D2\u8272\u5206\u914D\uFF1A",prop:"operatorRole"},{default:t(()=>[l(i,{modelValue:e.ruleForm.operatorRole,"onUpdate:modelValue":a[2]||(a[2]=u=>e.ruleForm.operatorRole=u),placeholder:"\u8BF7\u9009\u62E9",clearable:""},{default:t(()=>[(g(!0),E(R,null,L(e.myData,u=>(g(),y(h,{key:u.RoleUid,label:u.RoleName,value:u.RoleUid},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(n,{label:"\u72B6 \u6001\uFF1A",prop:"status"},{default:t(()=>[l(i,{modelValue:e.ruleForm.status,"onUpdate:modelValue":a[3]||(a[3]=u=>e.ruleForm.status=u),placeholder:"\u72B6 \u6001",clearable:""},{default:t(()=>[(g(!0),E(R,null,L(e.options,u=>(g(),y(h,{key:u.value,label:u.label,value:u.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(n,{label:"\u5907\u6CE8\uFF1A",prop:"remark"},{default:t(()=>[N(D("textarea",{"onUpdate:modelValue":a[4]||(a[4]=u=>e.ruleForm.remark=u)},null,512),[[P,e.ruleForm.remark]])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["layer","onConfirm"])}var ae=A(x,[["render",ee]]);const le=_({data(){return{yaanzheng:"",myData:[{value:"active",label:"\u6FC0\u6D3B"},{value:"unactive",label:"\u51BB\u7ED3"}]}},components:{Layer:S},props:{layer:{type:Object,default:()=>({show:!1,title:"",showButton:!0})}},created(){this.uapi()},setup(e,a){let p=w({operatorAccount:"",UserId:""});return F(),{ruleForm:p,rules:{operatorAccount:[{required:!0,message:"\u8BF7\u8F93\u5165\u4E0A\u9762\u7684\u9A8C\u8BC1\u5668\u5BC6\u94A5",trigger:"blur"}],sort:[{required:!0,message:"\u8BF7\u8F93\u5165\u6570\u5B57",trigger:"blur"}],select:[{required:!0,message:"\u8BF7\u9009\u62E9",trigger:"blur"}],radio:[{required:!0,message:"\u8BF7\u9009\u62E9",trigger:"blur"}]},options:[{value:"active",label:"\u6FC0\u6D3B"},{value:"unactive",label:"\u51BB\u7ED3"}]};function F(){p.UserId=e.layer.row.UserId}},methods:{submit(){this.$refs.form.validate(e=>{if(e){let a=this.ruleForm;this.updateForm(a)}else return!1})},uapi(){Y().then(e=>{this.yaanzheng=e.Yzheng})},addForm(e){I(e).then(a=>{this.$message({type:"success",message:"\u65B0\u589E\u6210\u529F"}),this.layer.show=!1,this.$emit("getTableData",!0)})},updateForm(e){K(e).then(a=>{this.$message({type:"success",message:"\u7F16\u8F91\u6210\u529F"}),this.$emit("getTableData",!1)})}}});function ue(e,a,p,c,m,F){const r=o("el-form-item"),n=o("el-input"),h=o("el-form"),i=o("Layer");return g(),y(i,{layer:e.layer,onConfirm:e.submit},{default:t(()=>[l(h,{model:e.ruleForm,rules:e.rules,ref:"form","label-width":"120px",style:{"margin-right":"30px"}},{default:t(()=>[l(r,{label:"\u521D\u59CB\u5BC6\u7801\uFF1A",prop:"operatorPassword"},{default:t(()=>[D("p",null,"\u8C37\u6B4C\u9A8C\u8BC1\u5668\u5BC6\u94A5\uFF1A"+B(e.yaanzheng),1),v(" "+B(e.UserId),1)]),_:1}),l(r,{label:"Google\u5BC6\u94A5\uFF1A",prop:"operatorAccount"},{default:t(()=>[l(n,{modelValue:e.ruleForm.operatorAccount,"onUpdate:modelValue":a[0]||(a[0]=b=>e.ruleForm.operatorAccount=b),placeholder:"\u8BF7\u5728\u8C37\u6B4C\u9A8C\u8BC1\u5668\u8F93\u5165\u4E0A\u9762\u9A8C\u8BC1"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["layer","onConfirm"])}var te=A(le,[["render",ue]]);const oe=_({data(){return{myData:[{value:"active",label:"\u6FC0\u6D3B"},{value:"unactive",label:"\u51BB\u7ED3"}],myvdata:[]}},components:{Layer:S},props:{layer:{type:Object,default:()=>({show:!1,title:"",showButton:!0})}},created(){this.uapi()},setup(e,a){const p=$(null);$(null);let c=$({UserId:"",Nick:"",operatorRole:"",Status:"",Remark:"",RoleUid:"",Passwd:"",RoleName:"",ChangePassword:""});const m={operatorAccount:[{required:!0,message:"\u8BF7\u8F93\u5165\u59D3\u540D",trigger:"blur"}],sort:[{required:!0,message:"\u8BF7\u8F93\u5165\u6570\u5B57",trigger:"blur"}],RoleUid:[{required:!0,message:"\u8BF7\u9009\u62E9",trigger:"blur"}],radio:[{required:!0,message:"\u8BF7\u9009\u62E9",trigger:"blur"}]},F=[{value:"active",label:"\u6FC0\u6D3B"},{value:"unactive",label:"\u51BB\u7ED3"}],r=[{value:"active",label:"\u6FC0\u6D3B"},{value:"unactive",label:"\u51BB\u7ED3"}];n();function n(){c.value=JSON.parse(JSON.stringify(e.layer.row))}return{ruleForm:p,rules:m,form:c,apidc:r,options:F}},methods:{submit(){this.ruleForm.validate(e=>{if(e){let a=this.form;this.layer.row?this.updateForm(a):this.addForm(a)}else return!1})},uapi(){let e=this.form;Q(e).then(a=>{this.myvdata=a.RoleList})},addForm(e){I(e).then(a=>{a.Code==-1?this.$message({type:"success",message:a.Msg}):(this.$message({type:"success",message:"\u65B0\u589E\u6210\u529F"}),this.layer.show=!1,this.$emit("getTableData",!0))})},updateForm(e){q(e).then(a=>{a.Code==-1?this.$message({type:"success",message:a.Msg}):(this.$message({type:"success",message:a.Msg}),this.layer.show=!1,this.$emit("getTableData",!1))})}}});function re(e,a,p,c,m,F){const r=o("el-input"),n=o("el-form-item"),h=o("el-option"),i=o("el-select"),b=o("el-form"),C=o("Layer");return g(),y(C,{layer:e.layer,onConfirm:e.submit,ref:"layerDom"},{default:t(()=>[l(b,{model:e.form,rules:e.rules,ref:"ruleForm","label-width":"120px",style:{"margin-right":"30px"}},{default:t(()=>[l(n,{label:"\u7528\u6237\u6635\u79F0\uFF1A",prop:"UserId"},{default:t(()=>[l(r,{modelValue:e.form.UserId,"onUpdate:modelValue":a[0]||(a[0]=u=>e.form.UserId=u),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0"},null,8,["modelValue"])]),_:1}),l(n,{label:"\u4FEE\u6539\u5BC6\u7801\uFF1A",prop:"Passwd"},{default:t(()=>[l(r,{type:"password",modelValue:e.form.Passwd,"onUpdate:modelValue":a[1]||(a[1]=u=>e.form.Passwd=u),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0"},null,8,["modelValue"])]),_:1}),l(n,{label:"\u786E\u8BA4\u5BC6\u7801\uFF1A",prop:"ChangePassword"},{default:t(()=>[l(r,{type:"password",modelValue:e.form.ChangePassword,"onUpdate:modelValue":a[2]||(a[2]=u=>e.form.ChangePassword=u),placeholder:"\u53EA\u80FD\u8F93\u5165\u6B63\u6574\u6570"},null,8,["modelValue"])]),_:1}),l(n,{label:"\u4FEE\u6539\u6635\u79F0\uFF1A",prop:"Nick"},{default:t(()=>[l(r,{modelValue:e.form.Nick,"onUpdate:modelValue":a[3]||(a[3]=u=>e.form.Nick=u),placeholder:"\u53EA\u80FD\u8F93\u5165\u6B63\u6574\u6570"},null,8,["modelValue"])]),_:1}),l(n,{label:"\u4FEE\u6539\u89D2\u8272\uFF1A",prop:"RoleUid"},{default:t(()=>[l(i,{modelValue:e.form.RoleUid,"onUpdate:modelValue":a[4]||(a[4]=u=>e.form.RoleUid=u),placeholder:"\u8BF7\u9009\u62E9",clearable:""},{default:t(()=>[(g(!0),E(R,null,L(e.myvdata,u=>(g(),y(h,{key:u.RoleUid,label:u.RoleName,value:u.RoleUid},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),v(" "+B(e.apid)+" ",1),l(n,{label:"\u5907\u6CE8\uFF1A",prop:"Remark"},{default:t(()=>[N(D("textarea",{"onUpdate:modelValue":a[5]||(a[5]=u=>e.form.Remark=u)},null,512),[[P,e.form.Remark]])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["layer","onConfirm"])}var se=A(oe,[["render",re]]);const ne=_({data(){return{boore:0}},components:{Table:M,Layer:ae,Layeredit:se,Layereditgoogle:te},setup(){const e=w({input:""}),a=w({show:!1,title:"\u65B0\u589E",showButton:!0}),p=w({show:!1,title:"\u65B0\u589E",showButton:!0}),c=w({show:!1,title:"\u8C37\u6B4C\u9A8C\u8BC1\u5668",showButton:!0}),m=w({index:1,size:20,total:0}),F=$(!0),r=$([]),n=$([]),h=d=>{n.value=d},i=d=>{F.value=!0,d&&(m.index=1),{page:m.index,pageSize:m.size,...e},z().then(s=>{let f=s.OperatorList;f.forEach(G=>{G.loading=!1}),r.value=f,m.total=Number(s.TotalPage)}).catch(s=>{r.value=[],m.index=1,m.total=0}).finally(()=>{F.value=!1})},b=d=>{let s={ids:d.map(f=>f.UserId).join(",")};j(s).then(f=>{T({type:"success",message:"\u5220\u9664\u6210\u529F"}),i(r.value.length===1)})},C=()=>{a.title="\u65B0\u589E\u6570\u636E",a.show=!0,delete a.row},u=d=>{p.title="\u7F16\u8F91\u6570\u636E",p.row=d,p.show=!0},V=d=>{c.title="google\u9A8C\u8BC1\u5668",c.row=d,c.show=!0},U=d=>{if(!d.Id)return;d.loading=!0;let s={id:d.Id,status:d.Status,operatorName:d.UserId};O(s).then(f=>{T({type:"success",message:"\u72B6\u6001\u53D8\u66F4\u6210\u529F"})}).catch(f=>{T({type:"error",message:"\u72B6\u6001\u53D8\u66F4\u5931\u8D25"})}).finally(()=>{d.loading=!1})};return i(!0),{Plus:W,Delete:X,Search:Z,query:e,tableData:r,chooseData:n,loading:F,page:m,layeredit:p,layereditgoogle:c,layer:a,handleSelectionChange:h,getTableData:i,handleDel:b,handleAdd:C,handleEdit:u,handleEditgoogle:V,handleUpdateStatus:U}}}),ie={class:"layout-container"},de={class:"layout-container-form flex space-between"},me={class:"layout-container-form-handle"},pe={class:"layout-container-form-search"},ge={class:"layout-container-table"},ce={class:"statusName"};function fe(e,a,p,c,m,F){const r=o("el-button"),n=o("el-popconfirm"),h=o("el-input"),i=o("el-table-column"),b=o("el-switch"),C=o("Table"),u=o("Layer"),V=o("Layeredit"),U=o("Layereditgoogle"),d=J("loading");return g(),E("div",ie,[D("div",de,[D("div",me,[l(r,{type:"primary",icon:e.Plus,onClick:e.handleAdd},{default:t(()=>[v(B(e.$t("message.common.add")),1)]),_:1},8,["icon","onClick"]),l(n,{title:e.$t("message.common.delTip"),onConfirm:a[0]||(a[0]=s=>e.handleDel(e.chooseData))},{reference:t(()=>[l(r,{type:"danger",icon:e.Delete,disabled:e.chooseData.length===0},{default:t(()=>[v(B(e.$t("message.common.delBat")),1)]),_:1},8,["icon","disabled"])]),_:1},8,["title"])]),D("div",pe,[l(h,{modelValue:e.query.input,"onUpdate:modelValue":a[1]||(a[1]=s=>e.query.input=s),placeholder:e.$t("message.common.searchTip")},null,8,["modelValue","placeholder"]),l(r,{type:"primary",icon:e.Search,class:"search-btn",onClick:a[2]||(a[2]=s=>e.getTableData(!0))},{default:t(()=>[v(B(e.$t("message.common.search")),1)]),_:1},8,["icon"])])]),D("div",ge,[N((g(),y(C,{ref:"table",page:e.page,"onUpdate:page":a[3]||(a[3]=s=>e.page=s),showSelection:!0,data:e.tableData,onGetTableData:e.getTableData,onSelectionChange:e.handleSelectionChange},{default:t(()=>[l(i,{prop:"Id",label:"Id",align:"center",width:"80"}),l(i,{prop:"UserId",label:"\u7528\u6237\u540D",align:"center"}),l(i,{prop:"Nick",label:"\u6635\u79F0",align:"center"}),l(i,{prop:"RoleName",label:"\u89D2\u8272",align:"center"}),l(i,{prop:"Remark",label:"\u5907\u6CE8",align:"center"}),l(i,{prop:"CreateTime",label:"\u521B\u5EFA\u65F6\u95F4",align:"center"}),l(i,{prop:"Status",label:"\u72B6\u6001",align:"center"},{default:t(s=>[D("span",ce,B(s.row.Status==="active"?"\u542F\u7528":"\u7981\u7528"),1),l(b,{modelValue:s.row.Status,"onUpdate:modelValue":f=>s.row.Status=f,"active-color":"#13ce66","inactive-color":"#ff4949","active-value":"active","inactive-value":"unactive",loading:s.row.loading,onChange:f=>e.handleUpdateStatus(s.row)},null,8,["modelValue","onUpdate:modelValue","loading","onChange"])]),_:1}),l(i,{label:e.$t("message.common.handle"),align:"center",fixed:"right",width:"200"},{default:t(s=>[l(r,{onClick:f=>e.handleEditgoogle(s.row)},{default:t(()=>[v("Google\u7ED1\u5B9A")]),_:2},1032,["onClick"]),l(r,{onClick:f=>e.handleEdit(s.row)},{default:t(()=>[v(B(e.$t("message.common.update")),1)]),_:2},1032,["onClick"]),l(n,{title:e.$t("message.common.delTip"),onConfirm:f=>e.handleDel([s.row])},{reference:t(()=>[l(r,{type:"danger"},{default:t(()=>[v(B(e.$t("message.common.del")),1)]),_:1})]),_:2},1032,["title","onConfirm"])]),_:1},8,["label"])]),_:1},8,["page","data","onGetTableData","onSelectionChange"])),[[d,e.loading]]),e.layer.show?(g(),y(u,{key:0,layer:e.layer,onGetTableData:e.getTableData},null,8,["layer","onGetTableData"])):k("",!0),e.layeredit.show?(g(),y(V,{key:1,layer:e.layeredit,onGetTableData:e.getTableData},null,8,["layer","onGetTableData"])):k("",!0),e.layereditgoogle.show?(g(),y(U,{key:2,layer:e.layereditgoogle,onGetTableData:e.getTableData},null,8,["layer","onGetTableData"])):k("",!0)])])}var ve=A(ne,[["render",fe],["__scopeId","data-v-28e50465"]]);export{ve as default};
