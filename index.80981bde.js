import{T as L}from"./index.75b94a68.js";import{b as $,c as S,e as N,d as k}from"./daili.9b11ba9c.js";import{a as M,b as q}from"./table.b6bd7b42.js";import{d as A,L as P,k as D,_ as C,r,o as s,z as y,w as t,b as l,c as _,F as E,y as B,e as V,t as U,j as w,G as z,a as T,H as G,I as j,E as O}from"./index.2d078062.js";import{P as I,S as J,D as R}from"./Search.b2bfb72f.js";const H=[{value:1,label:"\u8FD0\u52A8"},{value:2,label:"\u5065\u8EAB"},{value:3,label:"\u8DD1\u9177"},{value:4,label:"\u8857\u821E"}],K=[{value:1,label:"\u4ECA\u5929"},{value:2,label:"\u660E\u5929"},{value:3,label:"\u540E\u5929"}],Q=A({components:{Layer:P},props:{layer:{type:Object,default:()=>({show:!1,title:"",showButton:!0})}},setup(e,a){const n=D(null),f=D(null);let c=D({name:""});const F={name:[{required:!0,message:"\u8BF7\u8F93\u5165\u59D3\u540D",trigger:"blur"}],number:[{required:!0,message:"\u8BF7\u8F93\u5165\u6570\u5B57",trigger:"blur"}],choose:[{required:!0,message:"\u8BF7\u9009\u62E9",trigger:"blur"}],radio:[{required:!0,message:"\u8BF7\u9009\u62E9",trigger:"blur"}]};i();function i(){e.layer.row&&(c.value=JSON.parse(JSON.stringify(e.layer.row)))}return{form:c,rules:F,layerDom:f,ruleForm:n,selectData:H,radioData:K}},methods:{submit(){this.ruleForm&&this.ruleForm.validate(e=>{if(e){let a=this.form;this.layer.row?this.updateForm(a):this.addForm(a)}else return!1})},addForm(e){M(e).then(a=>{this.$message({type:"success",message:"\u65B0\u589E\u6210\u529F"}),this.$emit("getTableData",!0),this.layerDom&&this.layerDom.close()})},updateForm(e){q(e).then(a=>{this.$message({type:"success",message:"\u7F16\u8F91\u6210\u529F"}),this.$emit("getTableData",!1),this.layerDom&&this.layerDom.close()})}}});function W(e,a,n,f,c,F){const i=r("el-input"),d=r("el-form-item"),b=r("el-option"),v=r("el-select"),g=r("el-radio"),m=r("el-radio-group"),h=r("el-form"),p=r("Layer",!0);return s(),y(p,{layer:e.layer,onConfirm:e.submit,ref:"layerDom"},{default:t(()=>[l(h,{model:e.form,rules:e.rules,ref:"ruleForm","label-width":"120px",style:{"margin-right":"30px"}},{default:t(()=>[l(d,{label:"\u540D\u79F0\uFF1A",prop:"name"},{default:t(()=>[l(i,{modelValue:e.form.name,"onUpdate:modelValue":a[0]||(a[0]=o=>e.form.name=o),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0"},null,8,["modelValue"])]),_:1}),l(d,{label:"\u6570\u5B57\uFF1A",prop:"number"},{default:t(()=>[l(i,{modelValue:e.form.number,"onUpdate:modelValue":a[1]||(a[1]=o=>e.form.number=o),oninput:"value=value.replace(/[^\\d]/g,'')",placeholder:"\u53EA\u80FD\u8F93\u5165\u6B63\u6574\u6570"},null,8,["modelValue"])]),_:1}),l(d,{label:"\u9009\u62E9\u5668\uFF1A",prop:"select"},{default:t(()=>[l(v,{modelValue:e.form.choose,"onUpdate:modelValue":a[2]||(a[2]=o=>e.form.choose=o),placeholder:"\u8BF7\u9009\u62E9",clearable:""},{default:t(()=>[(s(!0),_(E,null,B(e.selectData,o=>(s(),y(b,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(d,{label:"\u5355\u9009\u6846\uFF1A",prop:"radio"},{default:t(()=>[l(m,{modelValue:e.form.radio,"onUpdate:modelValue":a[3]||(a[3]=o=>e.form.radio=o)},{default:t(()=>[(s(!0),_(E,null,B(e.radioData,o=>(s(),y(g,{key:o.value,label:o.value},{default:t(()=>[V(U(o.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["layer","onConfirm"])}var X=C(Q,[["render",W]]);const Y=A({data(){return{agraeec:[],agraeecpid:[]}},name:"crudTable",components:{Table:L,Layer:X},created(){this.getProductv(),this.getProductvuid()},setup(){const e=w({input:"",agentUid:"",merchantUid:""}),a=w({show:!1,title:"\u65B0\u589E",showButton:!0}),n=w({index:1,size:20,total:0}),f=D(!0),c=D([]),F=D([]),i=m=>{F.value=m},d=m=>{f.value=!0,m&&(n.index=1);let h={page:n.index,pageSize:n.size,...e};N(h).then(p=>{p.MerchantList,c.value=p.MerchantList,n.total=Number(p.TotalPage)*n.size}).catch(p=>{c.value=[],n.index=1,n.total=0}).finally(()=>{f.value=!1})},b=m=>{let h={merchantUid:m.map(p=>p.MerchantUid).join(",")};k(h).then(p=>{O({type:"success",message:"\u5220\u9664\u6210\u529F"}),d(c.value.length===1)})},v=()=>{a.title="\u65B0\u589E\u6570\u636E",a.show=!0,delete a.row},g=m=>{a.title="\u7F16\u8F91\u6570\u636E",a.row=m,a.show=!0};return d(!0),{Plus:I,Search:J,Delete:R,query:e,tableData:c,chooseData:F,loading:f,page:n,layer:a,handleSelectionChange:i,handleAdd:v,handleEdit:g,handleDel:b,agraee:$,getTableData:d}},methods:{getProductv(){$().then(e=>{this.agraeec=e.AgentList})},getProductvuid(){this.params,S().then(e=>{this.agraeecpid=e.MerchantList})}}}),Z={class:"layout-container"},x={class:"layout-container-form flex space-between",style:{width:"40%"}},ee={class:"layout-container-table"};function ae(e,a,n,f,c,F){const i=r("el-option"),d=r("el-select"),b=r("el-form-item"),v=r("el-button"),g=r("el-table-column"),m=r("el-popconfirm"),h=r("Table"),p=r("Layer"),o=z("loading");return s(),_("div",Z,[T("div",x,[l(b,{label:"\u4E0A\u6E38\u540D\u79F0",prop:"dateRange",style:{"margin-top":"15px"}},{default:t(()=>[l(d,{modelValue:e.query.agentUid,"onUpdate:modelValue":a[0]||(a[0]=u=>e.query.agentUid=u),placeholder:"\u8BF7\u9009\u62E9"},{default:t(()=>[l(i,{label:"\u8BF7\u9009\u62E9",value:""}),(s(!0),_(E,null,B(e.agraeec,u=>(s(),y(i,{key:u.AgentUid,label:u.AgentName,value:u.AgentUid},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(b,{label:"\u8BA2\u5355\u72B6\u6001",prop:"dateRange",style:{"margin-top":"15px"}},{default:t(()=>[l(d,{modelValue:e.query.merchantUid,"onUpdate:modelValue":a[1]||(a[1]=u=>e.query.merchantUid=u),placeholder:"\u8BF7\u9009\u62E9"},{default:t(()=>[l(i,{label:"\u8BF7\u9009\u62E9",value:""}),(s(!0),_(E,null,B(e.agraeecpid,u=>(s(),y(i,{key:u.MerchantUid,label:u.MerchantName,value:u.MerchantUid},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(b,{style:{"margin-top":"15px"}},{default:t(()=>[l(v,{type:"primary",icon:e.Search,class:"search-btn",onClick:a[2]||(a[2]=u=>e.getTableData(!0))},{default:t(()=>[V(U(e.$t("message.common.search")),1)]),_:1},8,["icon"])]),_:1})]),T("div",ee,[G((s(),y(h,{ref:"table",page:e.page,"onUpdate:page":a[3]||(a[3]=u=>e.page=u),showIndex:!0,showSelection:!0,data:e.tableData,onGetTableData:e.getTableData,onSelectionChange:e.handleSelectionChange},{default:t(()=>[l(g,{prop:"BelongAgentName",label:"\u4EE3\u7406\u540D\u79F0",align:"center"}),l(g,{prop:"BelongAgentUid",label:"\u4EE3\u7406uid",align:"center"}),l(g,{prop:"MerchantName",label:"\u4EE3\u7406\u5546\u6237\u540D",align:"center"}),l(g,{prop:"MerchantUid",label:"\u4EE3\u7406\u5546\u6237uid",align:"center"}),l(g,{label:e.$t("message.common.handle"),align:"center",fixed:"right",width:"300"},{default:t(u=>[l(m,{title:e.$t("message.common.delTip"),onConfirm:le=>e.handleDel([u.row])},{reference:t(()=>[l(v,{type:"danger"},{default:t(()=>[V(U(e.$t("message.common.del")),1)]),_:1})]),_:2},1032,["title","onConfirm"])]),_:1},8,["label"])]),_:1},8,["page","data","onGetTableData","onSelectionChange"])),[[o,e.loading]]),e.layer.show?(s(),y(p,{key:0,layer:e.layer,onGetTableData:e.getTableData},null,8,["layer","onGetTableData"])):j("",!0)])])}var se=C(Y,[["render",ae]]);export{se as default};
