import{T as R}from"./index.75b94a68.js";import{c as I}from"./table.b6bd7b42.js";import{b as k,d as L,e as $,f as M}from"./orderapi.dfa08a51.js";import{L as z,a as Y}from"./layeredit.752757a6.js";import{_ as G,d as O,j as B,k as C,r as m,G as H,o as d,c as D,a as S,b as t,w as l,F as q,y as P,z as h,e as F,t as g,H as W,I as U,E as _}from"./index.2d078062.js";import{P as j,S as J,D as K}from"./Search.b2bfb72f.js";import"./usergl.dcf36509.js";import"./enum.8cbae253.js";const Q=O({data(){return{myData:[],selectDataA:[]}},name:"crudTable",components:{Table:R,Layeredit:z,Layer:Y},created(){this.getProductv(),this.getDatatongdaoa()},setup(){const a=[{value:"success",label:"\u652F\u4ED8\u6210\u529F"},{value:"wait",label:"\u7B49\u5F85\u652F\u4ED8"},{value:"fail",label:"\u652F\u4ED8\u5931\u8D25"},{value:"cancel",label:"\u653E\u5F03\u652F\u4ED8"}],u=B({input:"",startTime:"",endTime:"",supplierUid:"",payWayCode:"",merchantName:"",agentName:"",bankOrderId:"",orderStatus:"",merchantid:""}),s=B({ammount:"",SuccessRate:"",Count:"",UserInAmount:"",SupplierProfit:"",Successface:""}),v=B({show:!1,title:"\u65B0\u589E",showButton:!0}),E=B({show:!1,title:"\u65B0\u589E",showButton:!0}),n=B({index:1,size:20,total:0}),c=C(!0),o=C([]),b=C([]),f=i=>{k().then(y=>{this.selectData=y.List})},w=i=>{b.value=i},p=i=>{c.value=!0,i&&(n.index=1);let y={page:n.index,pageSize:n.size,...u};L(y).then(e=>{e.List,s.ammount=e.AllAmount,s.Count=e.Count,s.SuccessRate=e.PlatformProfit,s.UserInAmount=e.UserInAmount,s.SupplierProfit=e.SupplierProfit,s.Successface=parseFloat(e.Successface/e.Count*100).toFixed(2),o.value=e.List,n.total=Number(e.TotalPage)*n.size}).catch(e=>{o.value=[],n.index=1,n.total=0}).finally(()=>{c.value=!1})},A=i=>{c.value=!0,i&&(n.index=1);let y={page:n.index,pageSize:n.size,...u};$(y).then(e=>{e.List,s.ammount=e.AllAmount,s.Count=e.Count,s.SuccessRate=e.PlatformProfit,s.UserInAmount=e.UserInAmount,s.SupplierProfit=e.SupplierProfit,s.Successface=e.Successface/e.Count*100,o.value=e.List,n.total=Number(e.TotalPage)*n.size}).catch(e=>{o.value=[],n.index=1,n.total=0}).finally(()=>{c.value=!1})},r=i=>{let y={roadUid:i.map(e=>e.RoadUid).join(",")};M(y).then(e=>{_({type:"success",message:"\u5220\u9664\u6210\u529F"}),p(o.value.length===1)})},T=()=>{v.title="\u65B0\u589E\u6570\u636E",v.show=!0,delete v.row},V=i=>{E.title="\u7F16\u8F91\u6570\u636E",E.row=i,E.show=!0};return p(!0),{Plus:j,Search:J,Delete:K,query:u,tableData:o,chooseData:b,loading:c,page:n,layer:v,layeredit:E,getTableDatacha:A,handleSelectionChange:w,handleAdd:T,handleEdit:V,handleDel:r,getTableData:p,selectDatav:a,getprode:f,queryv:s}},methods:{getDatatongdaoa(){I().then(a=>{this.selectDataA=a.Roadbank,console.info(a.Roadbank)})},getProductv(){k().then(a=>{this.myData=a.ProductMap})}}}),X={class:"layout-container"},Z={class:"layout-container-form flex space-between"},x={class:"system-user-search mb15"},ee={class:"layout-container-table"},ae={key:0},te={key:1,style:{color:"green"}},ue={key:2,style:{color:"red"}},le={key:3,style:{color:"red"}};function oe(a,u,s,v,E,n){const c=m("el-date-picker"),o=m("el-form-item"),b=m("el-input"),f=m("el-option"),w=m("el-select"),p=m("el-button"),A=m("el-form"),r=m("el-table-column"),T=m("Table"),V=m("Layer"),i=m("Layeredit"),y=H("loading");return d(),D("div",X,[S("div",Z,[S("div",x,[t(A,{model:a.query.input,ref:"queryRef",inline:!0,"label-width":"68px",style:{"text-align":"left"}},{default:l(()=>[t(o,{label:"\u5F00\u59CB\u65F6\u95F4",prop:"ipaddr",style:{"margin-top":"15px"}},{default:l(()=>[t(c,{ref:"datedate",modelValue:a.query.startTime,"onUpdate:modelValue":u[0]||(u[0]=e=>a.query.startTime=e),"value-format":"YYYY-MM-DD HH:mm:ss",type:"datetime",placeholder:"\u9009\u62E9\u65E5\u671F\u65F6\u95F4"},null,8,["modelValue"])]),_:1}),t(o,{label:"\u7ED3\u675F\u65F6\u95F4",prop:"loginLocation",style:{"margin-top":"15px"}},{default:l(()=>[t(c,{ref:"datedate",modelValue:a.query.endTime,"onUpdate:modelValue":u[1]||(u[1]=e=>a.query.endTime=e),"value-format":"YYYY-MM-DD HH:mm:ss",type:"datetime",placeholder:"\u9009\u62E9\u65E5\u671F\u65F6\u95F4"},null,8,["modelValue"])]),_:1}),t(o,{label:"\u5546\u6237\u7F16\u53F7",prop:"BankOrderId",style:{"margin-top":"15px"}},{default:l(()=>[t(b,{modelValue:a.query.merchantid,"onUpdate:modelValue":u[2]||(u[2]=e=>a.query.merchantid=e),placeholder:a.$t("message.common.bussecssid"),onChange:u[3]||(u[3]=e=>a.getTableData(!0))},null,8,["modelValue","placeholder"])]),_:1}),t(o,{label:"\u7528\u6237\u540D\u79F0",prop:"userName",style:{"margin-top":"15px"}},{default:l(()=>[t(b,{modelValue:a.query.merchantName,"onUpdate:modelValue":u[4]||(u[4]=e=>a.query.merchantName=e),placeholder:a.$t("message.common.bussecss"),onChange:u[5]||(u[5]=e=>a.getTableData(!0))},null,8,["modelValue","placeholder"])]),_:1}),t(o,{label:"\u4EE3\u7406\u540D\u79F0",prop:"status",style:{"margin-top":"15px"}},{default:l(()=>[t(b,{modelValue:a.query.agentName,"onUpdate:modelValue":u[6]||(u[6]=e=>a.query.agentName=e),placeholder:a.$t("message.common.daili"),onChange:u[7]||(u[7]=e=>a.getTableData(!0))},null,8,["modelValue","placeholder"])]),_:1}),t(o,{label:"\u7CFB\u7EDF\u8BA2\u5355\u53F7",prop:"dateRange",style:{"margin-top":"15px"}},{default:l(()=>[t(b,{modelValue:a.query.bankOrderId,"onUpdate:modelValue":u[8]||(u[8]=e=>a.query.bankOrderId=e),placeholder:a.$t("message.common.orderid"),onChange:u[9]||(u[9]=e=>a.getTableData(!0))},null,8,["modelValue","placeholder"])]),_:1}),t(o,{label:"\u4E0A\u6E38\u540D\u79F0",prop:"dateRange",style:{"margin-top":"15px"}},{default:l(()=>[t(w,{modelValue:a.query.supplierUid,"onUpdate:modelValue":u[10]||(u[10]=e=>a.query.supplierUid=e),placeholder:"\u8BF7\u9009\u62E9"},{default:l(()=>[t(f,{label:"\u8BF7\u9009\u62E9",value:""}),(d(!0),D(q,null,P(a.myData,(e,N)=>(d(),h(f,{key:e,label:e,value:N},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(o,{label:"\u8BA2\u5355\u72B6\u6001",prop:"dateRange",style:{"margin-top":"15px"}},{default:l(()=>[t(w,{modelValue:a.query.orderStatus,"onUpdate:modelValue":u[11]||(u[11]=e=>a.query.orderStatus=e),placeholder:"\u8BF7\u9009\u62E9"},{default:l(()=>[t(f,{label:"\u8BF7\u9009\u62E9",value:""}),(d(!0),D(q,null,P(a.selectDatav,e=>(d(),h(f,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(o,{label:"\u9009\u62E9\u901A\u9053",prop:"dateRange",style:{"margin-top":"15px"}},{default:l(()=>[t(w,{modelValue:a.query.payWayCode,"onUpdate:modelValue":u[12]||(u[12]=e=>a.query.payWayCode=e),placeholder:"\u8BF7\u9009\u62E9"},{default:l(()=>[t(f,{label:"\u8BF7\u9009\u62E9",value:""}),(d(!0),D(q,null,P(a.selectDataA,e=>(d(),h(f,{key:e.RoldRang,label:e.Name,value:e.RoldRang},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(o,null,{default:l(()=>[t(p,{type:"primary",icon:a.Search,class:"search-btn",onClick:u[13]||(u[13]=e=>a.getTableData(!0))},{default:l(()=>[F(g(a.$t("message.common.search")),1)]),_:1},8,["icon"])]),_:1}),t(p,{type:"warning"},{default:l(()=>[F("\u8BA2\u5355\u603B\u91D1\u989D:"+g(a.queryv.ammount),1)]),_:1}),t(p,{type:"warning"},{default:l(()=>[F("\u8BA2\u5355\u6570:"+g(a.queryv.Count),1)]),_:1}),t(p,{type:"warning"},{default:l(()=>[F("\u7528\u6237\u8FDB\u8D26\u91D1\u989D:"+g(a.queryv.UserInAmount),1)]),_:1}),t(p,{type:"warning"},{default:l(()=>[F("\u8FDB\u8D26\u8D39\u7387:"+g(a.queryv.SuccessRate),1)]),_:1}),t(p,{type:"warning"},{default:l(()=>[F("\u901A\u9053\u8D39\u7387:"+g(a.queryv.SupplierProfit),1)]),_:1}),t(p,{type:"warning"},{default:l(()=>[F("\u6210\u529F\u7387:"+g(a.queryv.Successface)+"%",1)]),_:1})]),_:1},8,["model"])])]),S("div",ee,[W((d(),h(T,{ref:"table",page:a.page,"onUpdate:page":u[14]||(u[14]=e=>a.page=e),showIndex:!0,showSelection:!0,data:a.tableData,onGetTableData:a.getTableData,onSelectionChange:a.handleSelectionChange},{default:l(()=>[t(r,{prop:"MerchantName",label:"\u5546\u6237\u540D\u79F0/\u5546\u6237\u7F16\u53F7",align:"center",width:"170","show-overflow-tooltip":""},{default:l(e=>[S("p",null,g(e.row.MerchantName)+"||"+g(e.row.MerchantUid),1)]),_:1}),t(r,{prop:"AgentName",label:"\u4EE3\u7406\u540D\u79F0",width:"80",align:"center"}),t(r,{prop:"BankOrderId",label:"\u7CFB\u7EDF\u8BA2\u5355\u53F7",width:"180",align:"center"}),t(r,{prop:"MerchantOrderId",label:"\u5546\u6237\u8BA2\u5355\u53F7",width:"180",align:"center"}),t(r,{prop:"OrderAmount",label:"\u5B9E\u9645\u91D1\u989D",align:"center"}),t(r,{prop:"AllProfit",label:"\u8D39\u7387",width:"60",align:"center"}),t(r,{prop:"UserInAmount",label:"\u7528\u6237\u8FDB\u8D26\u91D1\u989D",align:"center"}),t(r,{prop:"Status",label:"\u72B6\u6001",align:"center"},{default:l(e=>[e.row.Status=="wait"?(d(),D("p",ae,"\u7B49\u5F85\u652F\u4ED8")):e.row.Status=="success"?(d(),D("p",te,"\u652F\u4ED8\u6210\u529F")):e.row.Status=="fail"?(d(),D("p",ue,"\u652F\u4ED8\u5931\u8D25")):(d(),D("p",le,"\u653E\u5F03\u652F\u4ED8"))]),_:1}),t(r,{prop:"SupplierProfit",label:"	\u901A\u9053\u8D39\u7387",align:"center"}),t(r,{prop:"AgentProfit",label:"\u4EE3\u7406\u5229\u6DA6",align:"center"}),t(r,{prop:"PayTypeName",label:"\u652F\u4ED8\u7C7B\u578B",align:"center"}),t(r,{prop:"PayProductName",label:"\u4E0A\u6E38\u901A\u9053",align:"center"}),t(r,{prop:"CreateTime",width:"180",label:"\u4E0B\u5355\u65F6\u95F4",align:"center"})]),_:1},8,["page","data","onGetTableData","onSelectionChange"])),[[y,a.loading]]),a.layer.show?(d(),h(V,{key:0,layer:a.layer,onGetTableData:a.getTableData},null,8,["layer","onGetTableData"])):U("",!0),a.layeredit.show?(d(),h(i,{key:1,layer:a.layeredit,onGetTableData:a.getTableData},null,8,["layer","onGetTableData"])):U("",!0)])])}var ge=G(Q,[["render",oe]]);export{ge as default};
