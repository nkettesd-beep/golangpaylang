import{h as w,t as B,i as V,j as U}from"./daili.9b11ba9c.js";import{r as E,s as M}from"./enum.8cbae253.js";import{_ as N,d as $,L,k as m,j as C,r as s,G as x,o as p,c as b,a as n,b as l,w as r,e as c,F as z,y as I,z as A,H as R,t as D,I as S}from"./index.2d078062.js";import{T as q}from"./index.75b94a68.js";const P=$({components:{Layer:L,Table:q},props:{layer:{type:Object,default:()=>({show:!1,title:"",showButton:!0})}},setup(e,a){const T=m(null),y=m(null),g=m({remark:"",AgentName:"",AgentPhone:"",agentLoginPassword:"",agentVertifyPassword:"",agentRemark:"",status:"",Telegramlist:{Urladdress:"",Token:"",Tokenuid:"",Address:"",Ramk:""}}),v={AgentName:[{required:!0,message:"\u8BF7\u8F93\u5165\u7ED1\u5B9A\u57DF\u540D",trigger:"blur"}],AgentPhone:[{required:!0,message:"\u8BF7\u8F93\u5165Token",trigger:"blur"}]};function f(){e.layer.row&&(g.value=JSON.parse(JSON.stringify(e.layer.row)))}const i=C({MerchantKey:"",MerchantUid:"",MerchantName:"",freeStatus:""}),h=m([]),d=m([]),F=C({index:0,size:20,total:0,marchad:""}),_=m(!0),u=k=>{w(F).then(o=>{o.Code===200?(o.Telegramlist&&o.Telegramlist.length>0?g.value.Telegramlist=o.Telegramlist[0]:g.value.Telegramlist={Urladdress:"",Token:"",Tokenuid:"",Address:"",Ramk:""},d.value=o.TelegramAll,F.totle=o.Count,i.value=o.Telegramarch,h.value=o.Telegramarch):console.error("\u83B7\u53D6\u6570\u636E\u5931\u8D25:",o.Msg)}).finally(()=>{_.value=!1}).catch(o=>{console.error("\u8BF7\u6C42\u5931\u8D25:",o)})};return f(),{form:g,rules:v,layerDom:y,query:i,ruleForm:T,radioData:E,tableData:d,selectData:M,selectDatavdf:h,getTableData:u,page:F,getDataaa:w,loading:_}},mounted(){this.getTableData(!0)},methods:{submiturl(){this.ruleForm&&this.ruleForm.validate(e=>{if(e){const a=this.form.Telegramlist;console.log(a),this.updateFormurl(a)}else return!1})},handleMerchantChange(e){console.log(e),this.getTableData(!0),this.page.marchad.value=e},submit(){this.ruleForm&&this.ruleForm.validate(e=>{if(e){const a=this.form;this.layer.row?this.updateForm(a):this.addForm(a)}else return!1})},addForm(e){B(e).then(()=>{var a;this.$message({type:"success",message:"\u65B0\u589E\u6210\u529F"}),this.$emit("getTableData",!0),(a=this.layerDom)==null||a.close()}).catch(a=>{console.error("\u65B0\u589E\u5931\u8D25",a)})},updateForm(e){V(e).then(()=>{var a;this.$message({type:"success",message:"\u7F16\u8F91\u6210\u529F"}),this.$emit("getTableData",!1),(a=this.layerDom)==null||a.close()}).catch(a=>{console.error("\u7F16\u8F91\u5931\u8D25",a)})},updateFormurl(e){U(e).then(()=>{var a;this.$message({type:"success",message:"\u7F16\u8F91\u6210\u529F"}),this.$emit("getTableData",!1),(a=this.layerDom)==null||a.close()}).catch(a=>{console.error("\u7F16\u8F91\u5931\u8D25",a)})}}}),j={class:"layout-container"},G={class:"layout-container-form flex space-between",style:{width:"40%"}},O={class:"form-buttons"},J={class:"system-user-search",style:{"text-align":"left",padding:"0px","margin-top":"0px"}},H={class:"layout-container-table",style:{padding:"0px,margin:0px"}},K={style:{display:"grid","grid-template-columns":"1fr 1fr",gap:"5px"}},Q={style:{color:"green","font-size":"13px","font-weight":"600","grid-column":"1"}},W={style:{color:"red","font-size":"13px","font-weight":"600","grid-column":"2"}},X={style:{color:"blue","font-size":"13px","font-weight":"600","grid-column":"1 / span 2"}},Y={key:0},Z={key:1};function ee(e,a,T,y,g,v){const f=s("el-input"),i=s("el-form-item"),h=s("el-form"),d=s("el-button"),F=s("el-option"),_=s("el-select"),u=s("el-table-column"),k=s("Table"),o=x("loading");return p(),b("div",j,[n("div",G,[l(h,{model:e.form.Telegramlist,rules:e.rules,ref:"ruleForm","label-width":"120px",style:{"margin-right":"30px"}},{default:r(()=>[l(i,{label:"\u7ED1\u5B9A\u57DF\u540D\uFF1A",prop:"Urladdress"},{default:r(()=>[l(f,{modelValue:e.form.Telegramlist.Urladdress,"onUpdate:modelValue":a[0]||(a[0]=t=>e.form.Telegramlist.Urladdress=t),placeholder:"\u8BF7\u8F93\u5165\u57DF\u540D"},null,8,["modelValue"])]),_:1}),l(i,{label:"Token\uFF1A",prop:"Token"},{default:r(()=>[l(f,{modelValue:e.form.Telegramlist.Token,"onUpdate:modelValue":a[1]||(a[1]=t=>e.form.Telegramlist.Token=t),placeholder:"\u8BF7\u8F93\u5165Token"},null,8,["modelValue"])]),_:1}),l(i,{label:"\u64CD\u4F5CTagID\uFF1A",prop:"Tokenuid"},{default:r(()=>[l(f,{modelValue:e.form.Telegramlist.Tokenuid,"onUpdate:modelValue":a[2]||(a[2]=t=>e.form.Telegramlist.Tokenuid=t),oninput:"value=value.replace(/[^\\d]/g,'')",placeholder:"\u53EA\u80FD\u8F93\u5165\u6B63\u6574\u6570"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"]),n("div",O,[l(d,{type:"danger",onClick:e.submiturl},{default:r(()=>[c("\u7ED1\u5B9A\u57DF\u540D")]),_:1},8,["onClick"]),l(d,{type:"primary",onClick:e.submit},{default:r(()=>[c("\u63D0\u4EA4")]),_:1},8,["onClick"]),l(d,{onClick:e.cancel},{default:r(()=>[c("\u53D6\u6D88")]),_:1},8,["onClick"])])]),n("div",J,[l(h,{model:e.form.Telegramlist,ref:"queryRef",inline:!0,"label-width":"85px",style:{"text-align":"left",padding:"0px"}},{default:r(()=>[l(i,{label:"\u5546\u6237\u9009\u62E9:",prop:"dateRange",style:{"margin-top":"5px"}},{default:r(()=>[l(_,{modelValue:e.page.marchad,"onUpdate:modelValue":a[3]||(a[3]=t=>e.page.marchad=t),placeholder:"\u8BF7\u9009\u62E9",onChange:e.handleMerchantChange},{default:r(()=>[(p(!0),b(z,null,I(e.selectDatavdf,t=>(p(),A(F,{key:t.MerchantUid,label:t.MerchantName,value:t.MerchantUid},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])]),_:1})]),_:1},8,["model"])]),n("div",H,[R((p(),A(k,{ref:"table",page:e.page,"onUpdate:page":a[4]||(a[4]=t=>e.page=t),showIndex:!0,showSelection:!0,data:e.tableData,onGetTableData:e.getTableData},{default:r(()=>[l(u,{prop:"Id",label:"ID",align:"center"}),l(u,{prop:"Marchuid",label:"\u8D26\u6237\u4FE1\u606F",align:"center"},{default:r(t=>[c(" \u5546\u6237\u7F16\u53F7:"+D(t.row.Marchuid)+" \u540D\u79F0:"+D(t.row.Telegramuid),1)]),_:1}),l(u,{prop:"Bizhong",label:"\u5E01\u79CD\u7C7B\u578B",align:"center"}),l(u,{prop:"Amountcount",label:"U\u6570\u91CF",align:"center"}),l(u,{prop:"Feilv",label:"U\u6C47\u7387",align:"center"}),l(u,{prop:"Amount",label:"\u91D1\u989D",align:"center"}),l(u,{prop:"Allamount",label:"\u5907\u6CE8",align:"center",width:"300"},{default:r(t=>[n("div",K,[n("a",Q,"\u53D8\u52A8\u524D:"+D(t.row.Lastamount),1),n("a",W,"\u53D8\u52A8\u540E:"+D(t.row.Allamount),1),n("a",X,[c("\u53D8\u5316:"),t.row.Lei==0?(p(),b("span",Y,"+")):t.row.Lei==1?(p(),b("span",Z,"-")):S("",!0),c(D(t.row.Amount),1)])])]),_:1}),l(u,{prop:"Updatetime",label:"\u65F6\u95F4",align:"center"})]),_:1},8,["page","data","onGetTableData"])),[[o,e.loading]])])])}var re=N(P,[["render",ee],["__scopeId","data-v-bef9f058"]]);export{re as default};
