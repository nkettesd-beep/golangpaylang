import{T as N}from"./index.75b94a68.js";import{a as E,u as T,g as R,d as G}from"./daili.9b11ba9c.js";import{d as V,L,k as h,_ as C,r as n,o as g,z as F,w as o,b as t,c as P,F as O,y as q,H as _,a as B,N as z,j as w,G as j,e as D,t as $,I as A,E as I}from"./index.2d078062.js";import{r as k,s as U}from"./enum.8cbae253.js";import{P as J,S as M,D as H}from"./Search.b2bfb72f.js";const K=V({data(){return{myData:[{value:"active",label:"\u6FC0\u6D3B"},{value:"unactive",label:"\u51BB\u7ED3"}]}},components:{Layer:L},props:{layer:{type:Object,default:()=>({show:!1,title:"",showButton:!0})}},setup(e,a){const d=h(null),s=h(null);let m=h({remark:"",AgentName:"",agentPhone:"",agentLoginPassword:"",agentVertifyPassword:"",agentRemark:"",status:""});const p={roadUid:[{required:!0,message:"\u8BF7\u8F93\u5165\u59D3\u540D",trigger:"blur"}]};u();function u(){e.layer.row&&(m.value=JSON.parse(JSON.stringify(e.layer.row)))}return{form:m,rules:p,layerDom:s,ruleForm:d,radioData:k,selectData:U}},methods:{submit(){this.ruleForm&&this.ruleForm.validate(e=>{if(e){let a=this.form;this.layer.row?this.updateForm(a):this.addForm(a)}else return!1})},getProductone(e){updateone(e).then(a=>{this.myDatav=a.RoadInfoList})},addForm(e){E(e).then(a=>{this.$message({type:"success",message:"\u65B0\u589E\u6210\u529F"}),this.$emit("getTableData",!0),this.layerDom&&this.layerDom.close()})},updateForm(e){T(e).then(a=>{this.$message({type:"success",message:"\u7F16\u8F91\u6210\u529F"}),this.$emit("getTableData",!1),this.layerDom&&this.layerDom.close()})}}});function Q(e,a,d,s,m,p){const u=n("el-input"),i=n("el-form-item"),y=n("el-option"),f=n("el-select"),c=n("el-form"),b=n("Layer",!0);return g(),F(b,{layer:e.layer,onConfirm:e.submit,ref:"layerDom"},{default:o(()=>[t(c,{model:e.form,rules:e.rules,ref:"ruleForm","label-width":"120px",style:{"margin-right":"30px"}},{default:o(()=>[t(i,{label:"\u5546\u6237\u540D\u79F0\uFF1A",prop:"AgentUid"},{default:o(()=>[t(u,{modelValue:e.form.AgentName,"onUpdate:modelValue":a[0]||(a[0]=l=>e.form.AgentName=l),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0"},null,8,["modelValue"])]),_:1}),t(i,{label:"\u767B\u9646\u8D26\u53F7\uFF1A",prop:"RoadRemark"},{default:o(()=>[t(u,{modelValue:e.form.AgentPhone,"onUpdate:modelValue":a[1]||(a[1]=l=>e.form.AgentPhone=l),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0"},null,8,["modelValue"])]),_:1}),t(i,{label:"\u767B\u9646\u5BC6\u7801\uFF1A",prop:"Userid"},{default:o(()=>[t(u,{modelValue:e.form.agentLoginPassword,"onUpdate:modelValue":a[2]||(a[2]=l=>e.form.agentLoginPassword=l),oninput:"value=value.replace(/[^\\d]/g,'')",placeholder:"\u53EA\u80FD\u8F93\u5165\u6B63\u6574\u6570"},null,8,["modelValue"])]),_:1}),t(i,{label:"\u786E\u8BA4\u5BC6\u7801\uFF1A",prop:"BasicRate"},{default:o(()=>[t(u,{modelValue:e.form.agentVertifyPassword,"onUpdate:modelValue":a[3]||(a[3]=l=>e.form.agentVertifyPassword=l),oninput:"value=value.replace(/[^\\d]/g,'')",placeholder:"\u53EA\u80FD\u8F93\u5165\u6B63\u6574\u6570"},null,8,["modelValue"])]),_:1}),t(i,{label:"\u5546\u6237\u72B6\u6001\uFF1A",prop:"select",style:{"margin-left":"2px"}},{default:o(()=>[t(f,{modelValue:e.form.status,"onUpdate:modelValue":a[4]||(a[4]=l=>e.form.status=l),placeholder:"\u8BF7\u9009\u62E9"},{default:o(()=>[(g(!0),P(O,null,q(e.myData,l=>(g(),F(y,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(i,{label:"\u5907\u6CE8\uFF1A",prop:"Params"},{default:o(()=>[_(B("textarea",{"onUpdate:modelValue":a[5]||(a[5]=l=>e.form.remark=l)},null,512),[[z,e.form.remark]])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["layer","onConfirm"])}var W=C(K,[["render",Q]]);const X=V({data(){return{myData:[{value:"active",label:"\u6FC0\u6D3B"},{value:"unactive",label:"\u51BB\u7ED3"}]}},components:{Layer:L},props:{layer:{type:Object,default:()=>({show:!1,title:"",showButton:!0})}},setup(e,a){const d=h(null),s=h(null);let m=h({remark:"",AgentName:"",agentPhone:"",agentLoginPassword:"",agentVertifyPassword:"",agentRemark:"",status:""});const p={roadUid:[{required:!0,message:"\u8BF7\u8F93\u5165\u59D3\u540D",trigger:"blur"}]};u();function u(){e.layer.row&&(m.value=JSON.parse(JSON.stringify(e.layer.row)))}return{form:m,rules:p,layerDom:s,ruleForm:d,radioData:k,selectData:U}},methods:{submit(){this.ruleForm&&this.ruleForm.validate(e=>{if(e){let a=this.form;this.layer.row?this.updateForm(a):this.addForm(a)}else return!1})},getProductone(e){updateone(e).then(a=>{this.myDatav=a.RoadInfoList})},addForm(e){E(e).then(a=>{this.$message({type:"success",message:"\u65B0\u589E\u6210\u529F"}),this.$emit("getTableData",!0),this.layerDom&&this.layerDom.close()})},updateForm(e){T(e).then(a=>{this.$message({type:"success",message:"\u7F16\u8F91\u6210\u529F"}),this.$emit("getTableData",!1),this.layerDom&&this.layerDom.close()})}}});function Y(e,a,d,s,m,p){const u=n("el-input"),i=n("el-form-item"),y=n("el-form"),f=n("Layer");return g(),F(f,{layer:e.layer,onConfirm:e.submit,ref:"layerDom"},{default:o(()=>[t(y,{model:e.form,rules:e.rules,ref:"ruleForm","label-width":"120px",style:{"margin-right":"30px"}},{default:o(()=>[t(i,{label:"\u767B\u9646\u5BC6\u7801\uFF1A",prop:"Userid"},{default:o(()=>[t(u,{modelValue:e.form.agentLoginPassword,"onUpdate:modelValue":a[0]||(a[0]=c=>e.form.agentLoginPassword=c),oninput:"value=value.replace(/[^\\d]/g,'')",placeholder:"\u53EA\u80FD\u8F93\u5165\u6B63\u6574\u6570"},null,8,["modelValue"])]),_:1}),t(i,{label:"\u786E\u8BA4\u5BC6\u7801\uFF1A",prop:"BasicRate"},{default:o(()=>[t(u,{modelValue:e.form.agentVertifyPassword,"onUpdate:modelValue":a[1]||(a[1]=c=>e.form.agentVertifyPassword=c),oninput:"value=value.replace(/[^\\d]/g,'')",placeholder:"\u53EA\u80FD\u8F93\u5165\u6B63\u6574\u6570"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["layer","onConfirm"])}var Z=C(X,[["render",Y]]);const x=V({name:"crudTable",components:{Table:N,Layer:W,Layeredit:Z},setup(){const e=w({input:""}),a=w({show:!1,title:"\u65B0\u589E",showButton:!0}),d=w({show:!1,title:"\u6539\u5BC6",showButton:!0}),s=w({index:1,size:20,total:0}),m=h(!0),p=h([]),u=h([]),i=l=>{u.value=l},y=l=>{m.value=!0,l&&(s.index=1);let v={page:s.index,pageSize:s.size,...e};R(v).then(r=>{r.AgentList,p.value=r.AgentList,s.total=Number(r.TotalPage)*s.size}).catch(r=>{p.value=[],s.index=1,s.total=0}).finally(()=>{m.value=!1})},f=l=>{let v={merchantUid:l.map(r=>r.AgentUid).join(",")};G(v).then(r=>{I({type:"success",message:"\u5220\u9664\u6210\u529F"}),y(p.value.length===1)})},c=()=>{a.title="\u65B0\u589E\u6570\u636E",a.show=!0,delete a.row},b=l=>{d.title="\u91CD\u7F6E\u5BC6\u7801",d.row=l,d.show=!0};return y(!0),{Plus:J,Search:M,Delete:H,query:e,tableData:p,chooseData:u,loading:m,layeredit:d,page:s,layer:a,handleSelectionChange:i,handleAdd:c,handleEdit:b,handleDel:f,getTableData:y}}}),ee={class:"layout-container"},ae={class:"layout-container-form flex space-between"},te={class:"layout-container-form-handle"},le={class:"layout-container-form-search"},oe={class:"layout-container-table"};function ue(e,a,d,s,m,p){const u=n("el-button"),i=n("el-popconfirm"),y=n("el-input"),f=n("el-table-column"),c=n("Table"),b=n("Layer"),l=n("Layeredit"),v=j("loading");return g(),P("div",ee,[B("div",ae,[B("div",te,[t(u,{type:"primary",icon:e.Plus,onClick:e.handleAdd},{default:o(()=>[D($(e.$t("message.common.add")),1)]),_:1},8,["icon","onClick"]),t(i,{title:e.$t("message.common.delTip"),onConfirm:a[0]||(a[0]=r=>e.handleDel(e.chooseData))},{reference:o(()=>[t(u,{type:"danger",icon:e.Delete,disabled:e.chooseData.length===0},{default:o(()=>[D($(e.$t("message.common.delBat")),1)]),_:1},8,["icon","disabled"])]),_:1},8,["title"])]),B("div",le,[t(y,{modelValue:e.query.input,"onUpdate:modelValue":a[1]||(a[1]=r=>e.query.input=r),placeholder:e.$t("message.common.searchTip"),onChange:a[2]||(a[2]=r=>e.getTableData(!0))},null,8,["modelValue","placeholder"]),t(u,{type:"primary",icon:e.Search,class:"search-btn",onClick:a[3]||(a[3]=r=>e.getTableData(!0))},{default:o(()=>[D($(e.$t("message.common.search")),1)]),_:1},8,["icon"])])]),B("div",oe,[_((g(),F(c,{ref:"table",page:e.page,"onUpdate:page":a[4]||(a[4]=r=>e.page=r),showIndex:!0,showSelection:!0,data:e.tableData,onGetTableData:e.getTableData,onSelectionChange:e.handleSelectionChange},{default:o(()=>[t(f,{prop:"Status",label:"\u72B6\u6001",align:"center"},{default:o(r=>[r.row.Status=="active"?(g(),F(u,{key:0},{default:o(()=>[D(" \u6FC0\u6D3B\u72B6\u6001 ")]),_:1})):(g(),F(u,{key:1,type:"primary"},{default:o(()=>[D(" \u51BB\u7ED3\u72B6\u6001 ")]),_:1}))]),_:1}),t(f,{prop:"AgentUid",label:"\u4EE3\u7406\u7F16\u53F7",align:"center"}),t(f,{prop:"AgentName",label:"\u4EE3\u7406\u540D\u79F0",align:"center"}),t(f,{prop:"AgentPhone",label:"\u767B\u5F55\u8D26\u53F7",align:"center"}),t(f,{label:e.$t("message.common.handle"),align:"center",fixed:"right",width:"300"},{default:o(r=>[t(u,{type:"warning",onClick:S=>e.handleEdit(r.row)},{default:o(()=>[D("\u91CD\u7F6E\u5BC6\u7801")]),_:2},1032,["onClick"]),t(i,{title:e.$t("message.common.delTip"),onConfirm:S=>e.handleDel([r.row])},{reference:o(()=>[t(u,{type:"danger"},{default:o(()=>[D($(e.$t("message.common.del")),1)]),_:1})]),_:2},1032,["title","onConfirm"])]),_:1},8,["label"])]),_:1},8,["page","data","onGetTableData","onSelectionChange"])),[[v,e.loading]]),e.layer.show?(g(),F(b,{key:0,layer:e.layer,onGetTableData:e.getTableData},null,8,["layer","onGetTableData"])):A("",!0),e.layeredit.show?(g(),F(l,{key:1,layer:e.layeredit,onGetTableData:e.getTableData},null,8,["layer","onGetTableData"])):A("",!0)])])}var de=C(x,[["render",ue]]);export{de as default};
